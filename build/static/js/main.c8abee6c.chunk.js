(this["webpackJsonppart-2"]=this["webpackJsonppart-2"]||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(16),c=t.n(u),l=t(6),o=t(1),s=t.n(o),i=t(3),m=t(4),p=(t(23),function(e){var n=e.filterInput,t=e.handleFilterInputChange;return a.a.createElement("div",null,a.a.createElement("p",null,"Filter shown with"," ",a.a.createElement("input",{value:n,onChange:t})))}),d=function(e){var n=e.handleFormSubmit,t=e.fields,r=e.handleInputChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,a.a.createElement("p",null,"name:"," ",a.a.createElement("input",{name:"name",value:t.name,onChange:r})),a.a.createElement("p",null,"number:"," ",a.a.createElement("input",{name:"number",value:t.number,onChange:r}))),a.a.createElement("div",null,a.a.createElement("button",{disabled:!t.name||!t.number,type:"submit"},"add")))},f=function(e){var n=e.name,t=e.number,r=e.deleteBtnClick;return a.a.createElement("p",null,n," ",t," ",a.a.createElement("button",{onClick:r},"Delete"))},b=function(e){var n=e.persons,t=e.handleDeletePerson;return a.a.createElement("div",null,n.map((function(e){return a.a.createElement(f,{name:e.name,deleteBtnClick:function(){return t(e.id)},number:e.number,key:e.id})})))},v=t(5),h=t.n(v),w="/api/persons",E={getAllPersons:function(){var e=Object(i.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(w);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNewPerson:function(){var e=Object(i.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(w,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),editPerson:function(){var e=Object(i.a)(s.a.mark((function e(n,t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.put("".concat(w,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(i.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("".concat(w,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},g=function(e){var n=e.message,t=e.bgColor;return null===n?null:a.a.createElement("div",{className:"notification",style:{backgroundColor:t}},a.a.createElement("p",null,n))};var k=function(){var e=Object(r.useState)([]),n=Object(m.a)(e,2),t=n[0],u=n[1],c=Object(r.useState)({name:"",number:""}),o=Object(m.a)(c,2),f=o[0],v=o[1],h=Object(r.useState)(""),w=Object(m.a)(h,2),k=w[0],x=w[1],j=Object(r.useState)(!1),O=Object(m.a)(j,2),y=O[0],C=O[1],P=Object(r.useState)(null),S=Object(m.a)(P,2),T=S[0],I=S[1];Object(r.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.getAllPersons();case 3:n=e.sent,u(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),C(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var D=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=Object(l.a)({},f),!(a=t.find((function(e){return e.name===r.name})))){e.next=21;break}if(a.number!==r.number){e.next=11;break}return C(!0),I("".concat(r.name," is already added to phonebook")),setTimeout((function(){C(!1),I(null)}),5e3),e.abrupt("return");case 11:if(!window.confirm("".concat(r.name," is already added to phonebook, replace the old number with a new one?"))){e.next=19;break}return e.next=14,E.editPerson(a.id,{number:r.number});case 14:c=e.sent,u(t.map((function(e){return e.id!==a.id?e:c.data}))),v({name:"",number:""}),I("contact phone number updated successfully"),setTimeout((function(){I(null)}),5e3);case 19:e.next=38;break;case 21:return e.prev=21,e.next=24,E.createNewPerson(r);case 24:o=e.sent,console.log(o),u(t.concat(o.data)),v({name:"",number:""}),I("New contact added successfully"),setTimeout((function(){I(null)}),5e3),e.next=38;break;case 32:return e.prev=32,e.t0=e.catch(21),C(e.t0),I("Could not add new contact, please try again"),setTimeout((function(){C(!1),I(null)}),5e3),e.abrupt("return");case 38:case"end":return e.stop()}}),e,null,[[21,32]])})));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.find((function(e){return e.id===n}))){e.next=6;break}return C(!0),I("Person already deleted"),setTimeout((function(){C(!1),I(null)}),5e3),e.abrupt("return");case 6:if(!window.confirm("Delete ".concat(r.name,"?"))){e.next=24;break}return e.prev=7,e.next=10,E.deletePerson(r.id);case 10:e.sent,u(t.filter((function(e){return e.id!==r.id}))),I("contact phone number deleted successfully"),setTimeout((function(){I(null)}),5e3),e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(7),C(!0),I("Could not delete contact, please try again"),setTimeout((function(){C(!1),I(null)}),5e3),e.abrupt("return");case 22:e.next=27;break;case 24:return I("Person not deleted"),setTimeout((function(){I(null)}),5e3),e.abrupt("return");case 27:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(n){return e.apply(this,arguments)}}(),N=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(g,{message:T,bgColor:y?"red":"green"}),a.a.createElement(p,{filterInput:k,handleFilterInputChange:function(e){x(e.target.value)}}),a.a.createElement("h3",null,"Add a new"),a.a.createElement(d,{handleFormSubmit:D,fields:f,handleInputChange:function(e){var n=Object(l.a)({},f);n[e.target.name]=e.target.value,v(n)}}),a.a.createElement("h3",null,"Numbers"),y?a.a.createElement("p",null,"Could not load persons, please reload page"):t.length===[]?a.a.createElement("p",null,"Loadingggg"):a.a.createElement(b,{persons:N,handleDeletePerson:F}))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.c8abee6c.chunk.js.map