{"version":3,"sources":["Filter.js","PersonForm.js","Person.js","Persons.js","services/persons.js","Notification.js","App.js","index.js"],"names":["Filter","filterInput","handleFilterInputChange","value","onChange","PersonForm","handleFormSubmit","fields","handleInputChange","onSubmit","name","number","disabled","type","Person","deleteBtnClick","onClick","Persons","persons","handleDeletePerson","map","person","id","key","baseUrl","getAllPersons","a","axios","get","data","createNewPerson","personObject","post","newPerson","editPerson","personId","put","editedPerson","deletePerson","delete","deletedPerson","Notification","message","bgColor","className","style","backgroundColor","App","useState","setPersons","setFields","setFilterInput","error","setError","setMessage","useEffect","personService","getPersons","e","preventDefault","nameExist","find","setTimeout","window","confirm","personToUpdate","modifiedPerson","concat","clickedPerson","filter","shown","toLowerCase","includes","console","log","target","newFields","length","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ca8944fe.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filterInput, handleFilterInputChange }) => {\r\n  return (\r\n    <div>\r\n      <p>\r\n        Filter shown with{\" \"}\r\n        <input value={filterInput} onChange={handleFilterInputChange} />\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({ handleFormSubmit, fields, handleInputChange }) => {\r\n  return (\r\n    <form onSubmit={handleFormSubmit}>\r\n      <div>\r\n        <p>\r\n          name:{\" \"}\r\n          <input name=\"name\" value={fields.name} onChange={handleInputChange} />\r\n        </p>\r\n        <p>\r\n          number:{\" \"}\r\n          <input\r\n            name=\"number\"\r\n            value={fields.number}\r\n            onChange={handleInputChange}\r\n          />\r\n        </p>\r\n      </div>\r\n      <div>\r\n        <button disabled={!fields.name || !fields.number} type=\"submit\">\r\n          add\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ name, number, deleteBtnClick }) => (\r\n  <p>\r\n    {name} {number} <button onClick={deleteBtnClick}>Delete</button>\r\n  </p>\r\n);\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = ({ persons, handleDeletePerson }) => {\r\n  return (\r\n    <div>\r\n      {persons.map((person) => (\r\n        <Person\r\n          name={person.name}\r\n          deleteBtnClick={() => handleDeletePerson(person.id)}\r\n          number={person.number}\r\n          key={person.id}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAllPersons = async () => {\r\n  let persons = await axios.get(baseUrl);\r\n  return persons.data;\r\n};\r\n\r\nconst createNewPerson = async (personObject) => {\r\n  const newPerson = await axios.post(baseUrl, personObject);\r\n  return newPerson.data;\r\n};\r\n\r\nconst editPerson = async (personId, personObject) => {\r\n  const editedPerson = await axios.put(`${baseUrl}/${personId}`, personObject);\r\n  return editedPerson.data;\r\n};\r\n\r\nconst deletePerson = async (personId) => {\r\n  const deletedPerson = await axios.delete(`${baseUrl}/${personId}`);\r\n  return deletedPerson;\r\n};\r\n\r\nexport default {\r\n  getAllPersons,\r\n  createNewPerson,\r\n  editPerson,\r\n  deletePerson,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, bgColor }) => {\r\n  if (message === null) return null;\r\n  return (\r\n    <div className=\"notification\" style={{ backgroundColor: bgColor }}>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Filter from \"./Filter\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./Notification\";\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [fields, setFields] = useState({\n    name: \"\",\n    number: \"\",\n  });\n  const [filterInput, setFilterInput] = useState(\"\");\n  const [error, setError] = useState(false);\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    const getPersons = async () => {\n      try {\n        const persons = await personService.getAllPersons();\n        setPersons(persons.data);\n      } catch (error) {\n        setError(true);\n      }\n    };\n    getPersons();\n  }, []);\n\n  const handleInputChange = (e) => {\n    const newFields = { ...fields };\n    newFields[e.target.name] = e.target.value;\n    setFields(newFields);\n  };\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    const data = {\n      ...fields,\n    };\n    const nameExist = persons.find((person) => person.name === data.name);\n\n    if (nameExist) {\n      if (nameExist.number === data.number) {\n        setError(true);\n        setMessage(`${data.name} is already added to phonebook`);\n        setTimeout(() => {\n          setError(false);\n          setMessage(null);\n        }, 5000);\n        return;\n      } else {\n        if (\n          window.confirm(\n            `${data.name} is already added to phonebook, replace the old number with a new one?`\n          )\n        ) {\n          let personToUpdate = persons.find(\n            (person) => person.id === nameExist.id\n          );\n          personToUpdate = { ...personToUpdate, number: data.number };\n          const modifiedPerson = await personService.editPerson(\n            nameExist.id,\n            personToUpdate\n          );\n          setPersons(\n            persons.map((person) =>\n              person.id !== nameExist.id ? person : modifiedPerson\n            )\n          );\n          setFields({ name: \"\", number: \"\" });\n          setMessage(\"contact phone number updated successfully\");\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        }\n      }\n    } else\n      try {\n        const newPerson = await personService.createNewPerson(data);\n        setPersons(persons.concat(newPerson));\n        setFields({ name: \"\", number: \"\" });\n        setMessage(\"New contact added successfully\");\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      } catch (error) {\n        setError(error);\n        setMessage(\"Could not add new contact, please try again\");\n        setTimeout(() => {\n          setError(false);\n          setMessage(null);\n        }, 5000);\n        return;\n      }\n  };\n\n  const handleDeletePerson = async (id) => {\n    debugger;\n    const clickedPerson = persons.find((person) => person.id === id);\n    if (!clickedPerson) {\n      setError(true);\n      setMessage(\"Person already deleted\");\n      setTimeout(() => {\n        setError(false);\n        setMessage(null);\n      }, 5000);\n      return;\n    }\n\n    if (window.confirm(`Delete ${clickedPerson.name}?`)) {\n      try {\n        // eslint-disable-next-line no-unused-vars\n        const deletedPerson = await personService.deletePerson(\n          clickedPerson.id\n        );\n        setPersons(persons.filter((person) => person.id !== clickedPerson.id));\n        setMessage(\"contact phone number deleted successfully\");\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      } catch (error) {\n        setError(true);\n        setMessage(\"Could not deleted contact, please try again\");\n        setTimeout(() => {\n          setError(false);\n          setMessage(null);\n        }, 5000);\n        return;\n      }\n    } else {\n      setMessage(\"Person not deleted\");\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n      return;\n    }\n  };\n\n  const handleFilterInputChange = (e) => {\n    setFilterInput(e.target.value);\n  };\n  const shown = persons.filter((person) =>\n    person.name.toLowerCase().includes(filterInput.toLowerCase())\n  );\n  console.log(persons);\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} bgColor={error ? \"red\" : \"green\"} />\n      <Filter\n        filterInput={filterInput}\n        handleFilterInputChange={handleFilterInputChange}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        handleFormSubmit={handleFormSubmit}\n        fields={fields}\n        handleInputChange={handleInputChange}\n      />\n      <h3>Numbers</h3>\n      {error ? (\n        <p>Could not load persons, please reload page</p>\n      ) : persons.length === [] ? (\n        <p>Loadingggg</p>\n      ) : (\n        <Persons persons={shown} handleDeletePerson={handleDeletePerson} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}